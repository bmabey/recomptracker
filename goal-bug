Think hard.

For maximum efficiency, whenever you need to perform multiple independent operations, invoke all relevant tools simultaneously rather than sequentially.

If you create any temporary new files, scripts, or helper files for iteration, clean up these files by removing them at the end of the task.

Please write a high quality, general purpose solution. Implement a solution that works correctly for all valid inputs, not just the test cases. Do not hard-code values or create solutions that only work for specific test inputs. Instead, implement the actual logic that solves the problem generally.

Focus on understanding the problem requirements and implementing the correct algorithm. Tests are there to verify correctness, not to define the solution. Provide a principled implementation that follows best practices and software design principles.

If the task is unreasonable or infeasible, or if any of the tests are incorrect, please tell me. The solution should be robust, maintainable, and extendable.

There is currenlty a bug with the goal logic and web app. To reproduce it you load the example data and then enter an age, e.g. 45. The error is as follows:

ValueError: Unknown format code 'f' for object of type 'str'
Traceback:
File "/Users/ben.mabey/code/bodymetrics/overall-changes/webapp.py", line 1684, in <module>
    main()
    ~~~~^^
File "/Users/ben.mabey/code/bodymetrics/overall-changes/webapp.py", line 1670, in main
    display_results()
    ~~~~~~~~~~~~~~~^^
File "/Users/ben.mabey/code/bodymetrics/overall-changes/webapp.py", line 1350, in display_results
    goal_info = format_goal_info(goal_calculations['almi'], 'almi')
File "/Users/ben.mabey/code/bodymetrics/overall-changes/webapp.py", line 747, in format_goal_info
    goal_info = f"""**ðŸŽ¯ {metric.upper()} Goal: {goal_calc['target_percentile']*100:.0f}th percentile by age {goal_calc['target_age']:.1f}**
                                                                                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^


------------------------------------------------------------------------------

reproduce this bug and fix it